This file aims at briefly summarizing the structure of the configuration files generated by the makeconfig.py-script used in the bash example script batch_run.sh.

It might be helpful to look at the basic phaistos documentation to get familiar with the overall program structure before consulting this file.


Phaistos is best run using configuration files, which specify all the details of the Monte Carlo simulation to be performed.

The Maximum Entropy implementation of RDCs is implemented into the Inference module, specifically the term energy term, energy-inf-rdc.

To use the method the energy-inf-rdc-tensor-model should be chosen as "random_magnetic_field", which has an attribute that tells energy-term not to use the Saupe formalism.

The input data should be given by the argument

energy-inf-rdc-rdcs-filename = "/path/two_data_sets.txt"  

two_data_sets.txt is a simple tabel based input file format used in the energy term.
The colums content is as follows:
1 - Alignment condition identifier
2 - Residue index of first atom
3 - Atom name of first atom
4 - Residue index of second atom
5 - Atom name of second atom
6 - value of observed RDC

example:

WT 3 N 3 H  13.8
#WT 4 N 4 H  3.8 # this line is a comment
PHAGES 3 H 3 N 18.4
PHAGES 6 H 6 N 28.3

This datafile contains three RDCs observed in two alignment conditions.
The option specifies which type of likelihood should be used in the computation of the energy of the term. For historical reasons the simple linear expression arising from the Maximum Entropy derivation is called log_linear_ensemble - this likelihood has a scale-matrices attribute which contain the lagrange multipliers in the same order as the input datafiles described above, seperated by vertical bars |, for instance:
  
energy-inf-rdc-likelihood = log_linear_ensemble:[scale-matrices:"/path/lagrange_0|/path/lagrange_1"]

with the data file example above, lagrange_0 may for example contain:
0.04

and lagrange_1:
-0.023
0.0713

which are generated by the rdc_lambdas.py script following an estimation sweep e.g. one loop in the script batch_run.sh.
The rdc_lambdas.py script, also reports the correlation coefficient as the estimation sweeps proceed in the file output_ens.dat 

The degree of alignment parameter or, s, can be fixed via the parameter 
energy-inf-rdc-degree-of-alignment
NOTE: automated estimation is currently not implemented - but may be so soon. Please use almost if this is very urgent.

by default the pdb-file loaded is called native.pdb, but this can be changed in makeconfig.py-script.

by default the makeconfig.py script uses three montecarlo moves:
1. the none-move. none refers to no structural update - this triggers the sampling of the magnetic field orientation:
move-none = 1 
2. the crisp-move. the CRISP move is a local monte carlo move, please read/cite: Bottaro et al JCTC 2012 http://pubs.acs.org/doi/abs/10.1021/ct200641m if you use this.
move-crisp-dbn-eh = 1
3. a simple side-chain move which uniformly samples chi angles.
move-sidechain-uniform = 1

there are many other moves available please consult the phaistos documentation for further details.

disabling all structural moves allows one to sample the magnetic field orientation marginal distribution directly.


A quick checklist of what you need run simulations:
Phaistos installation with the Inference module enabled
input data: RDCs (in the table format specified above), a sequence or pdb-file (please consult phaistos documentation if you need details on how to use sequences as input -- please note that residue indices may change)
modify global variables in makeconfig.py, lambda_rdcs.py and batch_run.sh to match your needs.


 
